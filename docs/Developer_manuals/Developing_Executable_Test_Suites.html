<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Developing Executable Test Suites</title>
<link rel="stylesheet" href="../stylesheets/etf.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/pygments-autumn.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of contents</div>
<ul class="sectlevel0">
<li><a href="#_developing_executable_test_suites">Developing Executable Test Suites</a>
<ul class="sectlevel1">
<li><a href="#_changelog">Changelog</a></li>
</ul>
</li>
<li><a href="#_about_etf">About ETF</a>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_information_used_by_all_executable_test_suites">2. Information used by all Executable Test Suites</a>
<ul class="sectlevel2">
<li><a href="#_overview">2.1. Overview</a></li>
<li><a href="#message-template-bundles">2.2. Message template bundles</a></li>
<li><a href="#tags">2.3. Tags</a></li>
</ul>
</li>
<li><a href="#_basex_based_test_suites">3. BaseX-based test suites</a>
<ul class="sectlevel2">
<li><a href="#_required_knowledge">3.1. Required knowledge</a></li>
<li><a href="#_development_environment">3.2. Development environment</a>
<ul class="sectlevel3">
<li><a href="#_installation">3.2.1. Installation</a></li>
<li><a href="#_executing_tests">3.2.2. Executing tests</a></li>
<li><a href="#_best_practices">3.2.3. Best practices</a></li>
</ul>
</li>
<li><a href="#_basics">3.3. Basics</a></li>
<li><a href="#typical-setup">3.4. Typical setup</a></li>
<li><a href="#xml-document-of-an-executable-test-suite">3.5. XML document of an Executable Test Suite</a></li>
<li><a href="#the-xquery-document">3.6. The XQuery document</a></li>
<li><a href="#spatial-tests">3.7. Testing spatial aspects</a></li>
<li><a href="#parameters">3.8. Parameters</a></li>
<li><a href="#_test_object_types">3.9. Test Object Types</a></li>
<li><a href="#_dependencies">3.10. Dependencies</a></li>
<li><a href="#_tags">3.11. Tags</a></li>
<li><a href="#_attachments">3.12. Attachments</a></li>
</ul>
</li>
<li><a href="#_soapui_based_test_suites">4. SoapUI based Test Suites</a>
<ul class="sectlevel2">
<li><a href="#_required_knowledge_2">4.1. Required knowledge</a></li>
<li><a href="#_development_environment_2">4.2. Development environment</a>
<ul class="sectlevel3">
<li><a href="#_installation_2">4.2.1. Installation</a></li>
<li><a href="#_executing_tests_2">4.2.2. Executing tests</a></li>
</ul>
</li>
<li><a href="#_basics_2">4.3. Basics</a></li>
<li><a href="#_parameters_and_metadata_properties">4.4. Parameters and metadata properties</a></li>
<li><a href="#test-object-types">4.5. Test Object Types</a></li>
<li><a href="#_assertion_library">4.6. Assertion library</a></li>
<li><a href="#_tips_for_creating_helpful_test_suites">4.7. Tips for creating helpful test suites</a></li>
</ul>
</li>
<li><a href="#_team_engine_based_test_suites">5. TEAM-Engine-based test suites</a>
<ul class="sectlevel2">
<li><a href="#_team_engine_test_suites_supported_by_etf">5.1. TEAM Engine test suites supported by ETF</a></li>
<li><a href="#_how_to_register_a_team_engine_test_suites_as_an_exectuable_test_suite_in_etf">5.2. How to register a TEAM Engine test suites as an Exectuable Test Suite in ETF</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-none grid-none spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><a class="image" href="http://www.etf-validator.net"><img src="../images/ETF_logo.png" alt="ETF Logo" width="125"></a></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><span class="etf_headline">ETF<br>
Testing framework for spatial data and services</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<h1 id="_developing_executable_test_suites" class="sect0">Developing Executable Test Suites</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-topbot grid-none spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in review</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This document is a guide on how to develop Executable Test Suites for ETF using the test engines SoapUI, BaseX and the TEAM Engine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Target audience</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everyone planning to develop or edit Executable Test Suites</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution (cc-by) 4.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://docs.etf-validator.net/Developer_manuals/Developing_Executable_Test_Suites.html" class="bare">http://docs.etf-validator.net/Developer_manuals/Developing_Executable_Test_Suites.html</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Language</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
WORK IN PROGRESS
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changelog">Changelog</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Date</strong></th>
<th class="tableblock halign-left valign-top"><strong>Editor</strong></th>
<th class="tableblock halign-left valign-top"><strong>Comments</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016-09-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clemens Portele</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BaseX documentation created</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BaseX documentation updated and merged</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SoapUI documentation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-xx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann, Clemens Portele</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revision after review</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<!-- toc disabled -->
<div style="page-break-after: always;"></div>
</div>
</div>
<h1 id="_about_etf" class="sect0">About ETF</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>ETF is an open source testing framework for validating spatial data, metadata and web services in Spatial Data Infrastructures (SDIs). It can be used via a responsive web application or via a REST API.</p>
</div>
<div class="paragraph">
<p>The design of ETF is driven by three goals: be user-friendly, consistency with the standards and the capability to test all resources in an SDI.</p>
</div>
<div class="paragraph">
<p><a href="http://www.interactive-instruments.de/">interactive instruments</a> has developed ETF and is the primary maintainer of the software.</p>
</div>
<div class="paragraph">
<p><a href="http://docs.etf-validator.net/">More information about ETF&#8230;&#8203;</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is a guide on how to develop Executable Test Suites for ETF using the test engines SoapUI, BaseX and the TEAM Engine.</p>
</div>
<div class="paragraph">
<p>The concepts in ETF are based on ISO 19105 and the OGC Specification Model. Key concepts introduced by these two standards are Conformance Classes and Executable Test Suites.</p>
</div>
<div class="paragraph">
<p>A Conformance Class is a set of requirements defined in a specification. To pass the conformance class, a resource claiming conformance with that class must meet all the requirements.</p>
</div>
<div class="paragraph">
<p>An Executable Test Suite is a collection of tests that validates a resource against all the requirements in the associated Conformance Class.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../images/req-ats-cc-ets.png" alt="req ats cc ets"></span></p>
</div>
<div class="paragraph">
<p>ETF is built on these concepts as they underpin the standards and specifications that are used in Spatial Data Infrastructures and that are typically tested by validators based on ETF.</p>
</div>
<div class="paragraph">
<p>The resources that we want to test with ETF have different characteristics.</p>
</div>
<div class="paragraph">
<p>When testing GML data, test expressions will typically use XPath to express the assertions. Typical challenges in this case are performance for large datasets (10s or 100s of Gigabytes) and testing spatial aspects.</p>
</div>
<div class="paragraph">
<p>When we test an OGC web service, for example a Web Feature Service, the execution of the tests needs to be dynamic. The capabilities of the service need to be analyzed, test cases and assertions need to be generated based on the analysis of the feature types, their properties, the coordinate reference systems, the stored queries, the filter capabilities supported, etc. As a result, the execution of a test suite is a complex interaction between the validator and the web service and the Executable Test Suite not only needs to test responses from the web service, but also determine from the response what needs to be tested.</p>
</div>
<div class="paragraph">
<p>To address the different challenges properly, ETF supports different tools ("test engines") to execute Executable Test Suites. Currently supported are the following test engines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://soapui.org/">SoapUI</a>, a widely used tool for testing web services</p>
</li>
<li>
<p><a href="http://basex.org/">BaseX</a>, an XML database, for testing sets of XML documents - including very large ones</p>
</li>
<li>
<p><a href="http://opengeospatial.github.io/teamengine">TEAM Engine</a>, the tool used by the OGC CITE tests, to support the modern CITE tests developed using TestNG</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The BaseX extension module <a href="https://github.com/interactive-instruments/etf-gmlgeox">GmlGeoX</a> extends XQuery to enable testing spatial aspects of GML features (geometry validation, spatial indexing, spatial predicates).</p>
</div>
<div class="paragraph">
<p>Due to the different characteristics of the test engines, the development of an Executable Test Suite is very different for each test engine.</p>
</div>
<div class="paragraph">
<p>For each of the supported test engines, ETF has specified a mapping from the concepts of the test engine to the ETF concepts so that test results in ETF are homogenous - whatever test engines are used in a test run.</p>
</div>
<div class="paragraph">
<p>This guide, therefore, describes how to use the test engines in a way that is consistent with the ETC concepts. It is <strong>not</strong> a tutorial for the test engines (SoapUI, BaseX, TEAM Engine) or the relevant technologies (XML, XQuery, HTTP, Groovy, etc.). We assume working knowledge with the relevant tools and technologies. We have included links that should help to familiarize yourself with the relevant tools and technologies, where this is needed.</p>
</div>
<div class="paragraph">
<p>Please see
<a href="http://opengeospatial.github.io/teamengine/testng-essentials.html">this manual</a>
for developing test suites for the Team Engine.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
!!! The last paragraph needs to go to the relevant section.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_information_used_by_all_executable_test_suites">2. Information used by all Executable Test Suites</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">2.1. Overview</h3>
<div class="paragraph">
<p>All Executable Test Suites can make use of and reference generic information items that is used by ETF to organize Executable Test Suites and present test reports to a user.</p>
</div>
<div class="paragraph">
<p>How these items are referenced in the different types of Executable Test Suites is described in the section for each test engine.</p>
</div>
<div class="paragraph">
<p>These items are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Collections of multi-lingual message templates for use in test reports for one or more Executable Test Suites</p>
</li>
<li>
<p>Tags that may be associated with an Executable Test Suite to support grouping and filtering</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<mark>What about TestObjectType and StatisticalReportTableType?</mark>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These items that stored as XML documents in the  <code>include-metadata</code>
directory of an ETF deployment (see <a href="http://"><mark>add link where the directory structure is described</mark></a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="message-template-bundles">2.2. Message template bundles</h3>
<div class="paragraph">
<p>Message templates are collected in an XML document with a root element
<code>etf:TranslationTemplateBundle</code>. The file name must start with the
prefix "TranslationTemplateBundle" and must be located in the directory
<code>include-metadata</code>. The <code>id</code> attribute must be a unique UUID, prefixed with "EID".</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/include-metadata/generic-ettb.xml">generic-ettb.xml</a>
can be used as a starting point for a translation template bundle. Do
not forget to change the <code>id</code> attribute to a different UUID.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 1. Message templates used for Executable Test Suites in INSPIRE</div>
<div class="content">
<div class="paragraph">
<p>The template bundle for the BaseX-based tests in the INSPIRE validator is
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/TranslationTemplateBundle-EID70a263c0-0ad7-42f2-9d4d-0d8a4ca71b52.xml">TranslationTemplateBundle-EID70a263c0-0ad7-42f2-9d4d-0d8a4ca71b52.xml</a>.</p>
</div>
<div class="paragraph">
<p>The template bundle for the SoapUI-based tests in the INSPIRE validator is
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/TranslationTemplateBundle-EIDfadd4929-fa60-4781-b658-703bbfe3f4eb.xml">TranslationTemplateBundle-EIDfadd4929-fa60-4781-b658-703bbfe3f4eb.xml</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Each message template is in an <code>etf:LangTranslationTemplateCollection</code>
element and includes an <code>etf:TranslationTemplate</code> per language for the
same message. The language is encoded in the <code>language</code> attribute using
language codes used in HTTP headers, e.g. "en" for English.</p>
</div>
<div class="paragraph">
<p>The placeholders are embedded in curly brackets, e.g. "{filename}".</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All names must start with "TR." and may only use the following characters: <mark>add list of characters</mark>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The <code>name</code> attribute values of an <code>etf:LangTranslationTemplateCollection</code> element and its <code>etf:TranslationTemplate</code> elements must be identical.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 2. A single message template in two languages</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;TranslationTemplateBundle xmlns="http://www.interactive-instruments.de/etf/2.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 http://resources.etf-validator.net/schema/v2/model/resultSet.xsd"
   id="EID27117afb-11aa-4e45-aa3d-0e1e65bdccb8"&gt;
    &lt;translationTemplateCollections&gt;
      &lt;LangTranslationTemplateCollection name="TR.incorrectRoot"&gt;
         &lt;translationTemplates&gt;
            &lt;TranslationTemplate language="en" name="TR.incorrectRoot"&gt;XML document '{filename}': The root element is not one of the recognised feature collections: wfs:FeatureCollection (WFS 1.1 or WFS 2.0) or gml:FeatureCollection (GML 3.1 or GML 3.2). The name of the root element is '{elementName}' in namespace '{namespace}'.&lt;/TranslationTemplate&gt;
            &lt;TranslationTemplate language="de" name="TR.incorrectRoot"&gt;XML-Dokument '{filename}': Das Wurzelelement ist keines der erwarteten Feature-Collection-Elemente: wfs:FeatureCollection (WFS 1.1 oder WFS 2.0) oder gml:FeatureCollection (GML 3.1 oder GML 3.2). Der Name des Wurzelelements is '{elementName}' im Namensraum '{namespace}'.&lt;/TranslationTemplate&gt;
         &lt;/translationTemplates&gt;
      &lt;/LangTranslationTemplateCollection&gt;
    &lt;/translationTemplateCollections&gt;
&lt;/TranslationTemplateBundle&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tags">2.3. Tags</h3>
<div class="paragraph">
<p>Items may be associated with tags. If Executable Test Suites are
associated with tags, the ETF web application groups them by tags.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
How Execuable Test Suites are associated with tags differs between test engines and is described in the test engine sections.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tags are an XML document with a root element <code>etf:Tag</code>. The file name must start with the prefix "Tag" and must be located in the directory <code>include-metadata</code>. The <code>id</code> attribute must be a unique UUID, prefixed with "EID".</p>
</div>
<div class="paragraph">
<p>The tag has a label and a description. If a priority value is provided for a tag, the web application sorts the tags in the order of ascending priority values.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Tags defined in the INSPIRE validator</div>
<div class="content">
<div class="paragraph">
<p>The INSPIRE validator uses <a href="https://github.com/inspire-eu-validation/ets-repository/tree/master/include-metadata">several tags</a> to organize its Executable Test Suites. One of the tags is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;Tag xmlns="http://www.interactive-instruments.de/etf/2.0" id="EIDfe1f3796-0ebf-4960-a6f7-f935e087fa4b" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 http://resources.etf-validator.net/schema/v2/model/resultSet.xsd"&gt;
	&lt;label&gt;Data Theme: Administrative Units (Data Specification version 3.1)&lt;/label&gt;
	&lt;description&gt;Tests for conformance classes specific to features of the data theme 'Administrative Units'.&lt;/description&gt;
	&lt;priority&gt;202&lt;/priority&gt;
&lt;/Tag&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basex_based_test_suites">3. BaseX-based test suites</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_required_knowledge">3.1. Required knowledge</h3>
<div class="paragraph">
<p>To develop Executable Test Suites for testing XML documents in ETF using BaseX,
you should be familiar with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.w3.org/TR/xquery-31/">XQuery</a> and XML technologies in general</p>
</li>
<li>
<p>the ETF domain model items</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/test_xsd.html#ExecutableTestSuite"> Executable Test Suite</a></p>
</li>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/capabilities_xsd.html#TestObject">Test Object</a></p>
</li>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/run_xsd.html#TestTask">Test Task</a></p>
</li>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/result_xsd.html#TestTaskResult">Test Task Result</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_environment">3.2. Development environment</h3>
<div class="paragraph">
<p>An BaseX Executable Test Suite is typically developed and tested using the
BaseX GUI application.</p>
</div>
<div class="sect3">
<h4 id="_installation">3.2.1. Installation</h4>
<div class="paragraph">
<p>For guidance on downloading and installing BaseX see the
<a href="http://basex.org/products/download/all-downloads/">BaseX website</a>. It is
recommended to use the same version that is also used by ETF, currently
version 8.6.</p>
</div>
<div class="paragraph">
<p>Two additional modules should be installed in the local BaseX
installation as they are frequently used in Executable Test Suites:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the standard functx module</p>
</li>
<li>
<p>the <a href="https://github.com/interactive-instruments/etf-gmlgeox">GmlGeoX
module</a> for spatial extensions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add the functx module, select "Options", then "Packages&#8230;&#8203;", then
"Install from URI&#8230;&#8203;", enter the URI
"http://files.basex.org/modules/expath/functx-1.0.xar" and press "OK".</p>
</div>
<div class="paragraph">
<p>To add the GmlGeoX module,
<a href="https://services.interactive-instruments.de//etfdev-af/etf-public-releases/de/interactive_instruments/etf/bsxm/etf-gmlgeox/">download
the latest version of the JAR file</a> using <code>etf-public-releases</code> as user
and password. Select again "Options", then "Packages&#8230;&#8203;", then
"Install&#8230;&#8203;" and navigate to the JAR file. Press "Choose".</p>
</div>
</div>
<div class="sect3">
<h4 id="_executing_tests">3.2.2. Executing tests</h4>
<div class="paragraph">
<p>To execute a test suite against a set of XML documents follow these
steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Load the XML documents into a new database</p>
</li>
<li>
<p>Select "Database" &gt; "New&#8230;&#8203;" in the menu.</p>
</li>
<li>
<p>Select the XML document or the directory with the XML document or a
ZIP file with the XML documents.</p>
</li>
<li>
<p>Use a database name that ends in "-0".</p>
</li>
<li>
<p>If necessary, add additional file patterns beside "*.xml".</p>
</li>
<li>
<p>In the tab "Parsing" check "Use internal XML parser".</p>
</li>
<li>
<p>Leave all other options unchanged and press "OK".</p>
</li>
<li>
<p>Open the XQuery document (see <a href="#the-xquery-document">below</a> for more information) in the editor.</p>
</li>
<li>
<p>Search for the declaration of the following variables and set their
default values:</p>
</li>
<li>
<p>Set <code>$projDir</code> to the local file path where the project files are
located.</p>
</li>
<li>
<p>Set <code>$dbBaseName</code> to the name of the database with the "-0" suffix.</p>
</li>
<li>
<p>Set <code>$etsFile`to the file path of the `etf:ExecutableTestSuite</code>
document.</p>
<div class="exampleblock">
<div class="title">Example 4. XQuery declarations of standard variables</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>declare variable $projDir external := "/home/user/Documents/ETF/ets-repository/generic";
declare variable $dbBaseName external := "errors";
declare variable $etsFile external := $projDir || file:dir-separator() || "ets-template-bsxets.xml";</pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Executing the XQuery should now execute the test suite.</p>
</div>
</div>
<div class="sect3">
<h4 id="_best_practices">3.2.3. Best practices</h4>
<div class="paragraph">
<p>During the development of a test suite, it may be handy to compile a
special XQuery that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>loads a test file using the doc() function</p>
</li>
<li>
<p>includes the functions that will be called from expressions in
assertions</p>
</li>
<li>
<p>sets the relevant variables used in expressions in assertions</p>
</li>
<li>
<p>adds the expression of a single assertion that should be tested</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach may speed up testing during the development. For example,
loading a test document using the doc() function allows to make
immediate changes to a test file without reloading a database.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basics">3.3. Basics</h3>
<div class="paragraph">
<p>In ETF, sets of XML documents are tested using <a href="http://basex.org">BaseX</a>, an XML database.
An Executable Test Suite is essentially an <a href="http://www.w3.org/TR/xquery-31/">XQuery</a> that operates on the set of XML documents under test and returns an XML document with the root element <code>etf:TestTaskResult</code>.</p>
</div>
<div class="paragraph">
<p>The content model is specified using an <a href="http://resources.etf-validator.net/schema/v2/doc/service.html">XML schema</a>.</p>
</div>
<div class="paragraph">
<p>The current stable schema is available <a href="http://resources.etf-validator.net/schema/v2/service/service.xsd">here</a> and can be used for validating ETF XML structures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;EtfModelItem xmlns="http://www.interactive-instruments.de/etf/2.0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 http://resources.etf-validator.net/schema/v2/service/service.xsd" ...&gt;
  ...
&lt;/EtfModelItem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a simple example with one test case result embedding two test assertions results:</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. Simple example of the result of testing a BaseX-based Executable Test Suite</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;TestTaskResult xmlns="http://www.interactive-instruments.de/etf/2.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 http://resources.etf-validator.net/schema/v2/service/service.xsd"
    id="EIDc5e50620-5107-4b75-b6c1-74d4465fba0f"&gt;
    &lt;testObject ref="EID666f71c1-9af3-4040-a21d-190f953725f4"/&gt;
    &lt;testModuleResults&gt;
        &lt;TestModuleResult id="EIDfdfc25d5-1790-43bd-abb6-2de6263619cc"&gt;
            &lt;testCaseResults&gt;
                &lt;TestCaseResult id="EID3dab6279-f553-4f93-b1bc-b73329fc69c3"&gt;
                    &lt;testStepResults&gt;
                        &lt;TestStepResult id="EIDffaf6f6a-66f6-4796-8c42-e5f681517c62"&gt;
                            &lt;testAssertionResults&gt;
                                &lt;TestAssertionResult id="EIDa35d1dd3-7cc2-41c7-9b2b-f60df48ffabb"&gt;
                                    &lt;parent ref="EIDffaf6f6a-66f6-4796-8c42-e5f681517c62"/&gt;
                                    &lt;resultedFrom ref="EIDcab35f1a-6292-44b9-ae2c-9ec62fc0f4b6"/&gt;
                                    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                                    &lt;duration&gt;0&lt;/duration&gt;
                                    &lt;status&gt;PASSED&lt;/status&gt;
                                &lt;/TestAssertionResult&gt;
                                &lt;TestAssertionResult id="EIDc18b01ff-f544-4d0e-9a8f-ef3874abd43f"&gt;
                                    &lt;messages&gt;
                                        &lt;message ref="TR.filesWithErrors"&gt;
                                            &lt;translationArguments&gt;
                                                &lt;argument token="count"&gt;1&lt;/argument&gt;
                                            &lt;/translationArguments&gt;
                                        &lt;/message&gt;
                                        &lt;message ref="TR.incorrectRoot"&gt;
                                            &lt;translationArguments&gt;
                                                &lt;argument token="filename"&gt;ps-root.xml&lt;/argument&gt;
                                                &lt;argument token="elementName"&gt;FeatureCollection&lt;/argument&gt;
                                                &lt;argument token="namespace"&gt;http://www.opengis.net/wfs&lt;/argument&gt;
                                            &lt;/translationArguments&gt;
                                        &lt;/message&gt;
                                    &lt;/messages&gt;
                                    &lt;parent ref="EIDffaf6f6a-66f6-4796-8c42-e5f681517c62"/&gt;
                                    &lt;resultedFrom ref="EID928d8204-3015-4811-82fd-f4779b35385b"/&gt;
                                    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                                    &lt;duration&gt;1&lt;/duration&gt;
                                    &lt;status&gt;FAILED&lt;/status&gt;
                                &lt;/TestAssertionResult&gt;
                            &lt;/testAssertionResults&gt;
                            &lt;parent ref="EID3dab6279-f553-4f93-b1bc-b73329fc69c3"/&gt;
                            &lt;resultedFrom ref="EIDc177cf64-3a66-4ac4-92b9-61207aab8007"/&gt;
                            &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                            &lt;duration&gt;1&lt;/duration&gt;
                            &lt;status&gt;FAILED&lt;/status&gt;
                        &lt;/TestStepResult&gt;
                    &lt;/testStepResults&gt;
                    &lt;parent ref="EIDfdfc25d5-1790-43bd-abb6-2de6263619cc"/&gt;
                    &lt;resultedFrom ref="EIDf66872d4-3a1f-4581-a501-94200219bf13"/&gt;
                    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                    &lt;duration&gt;1&lt;/duration&gt;
                    &lt;status&gt;FAILED&lt;/status&gt;
                &lt;/TestCaseResult&gt;
            &lt;/testCaseResults&gt;
            &lt;parent ref="EIDc5e50620-5107-4b75-b6c1-74d4465fba0f"/&gt;
            &lt;resultedFrom ref="EID8e96257c-ae42-4123-b298-b8c5eda3a027"/&gt;
            &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
            &lt;duration&gt;1&lt;/duration&gt;
            &lt;status&gt;FAILED&lt;/status&gt;
        &lt;/TestModuleResult&gt;
    &lt;/testModuleResults&gt;
    &lt;attachments&gt;
        &lt;Attachment id="EIDc5e50620-5111-4bc5-b6c1-74d4465fbb23"&gt;
            &lt;label&gt;Log file&lt;/label&gt;
            &lt;encoding&gt;UTF-8&lt;/encoding&gt;
            &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
            &lt;referencedData href="file://local/log.txt"/&gt;
        &lt;/Attachment&gt;
    &lt;/attachments&gt;
    &lt;resultedFrom ref="EID545f9e49-009b-4114-9333-7ca26413b5d4"/&gt;
    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
    &lt;duration&gt;1&lt;/duration&gt;
    &lt;status&gt;FAILED&lt;/status&gt;
&lt;/TestTaskResult&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The document is based on the nested structures of test modules, test
cases, test steps and test assertions. For each of these result items
some basic information is provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An identifier in an attribute <code>id</code>. The value must be a UUID with a
prefix "EID", e.g. "EIDc5e50620-5107-4b75-b6c1-74d4465fba0f".</p>
<div class="paragraph">
<p>In XQueries in BaseX, new UUID values can be created using
<code>uuid:randomUUID()</code> where the uuid namespace is declared using
<code>declare namespace uuid='java.util.UUID';</code>.</p>
</div>
</li>
<li>
<p>Each result item, except the top level test task result (representing
the result of executing the test suite) has a <code>etf:parent</code> child element
with a <code>ref</code> attribute. The value of the <code>ref</code> attribute is the <code>id</code> of
the ancestor result item.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this packaging of the result items the <code>ref</code> value is redundant
as it could be derived from the nested document structure, but it is
required so that the result items can also be stored separately without
losing the relationships between the result items.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The status of the result item is given in a child element
<code>etf:status</code>. For every level except the lowest level (the test
assertions), the status must be derived automatically from the status
values of the next lower level where the following XQuery function could
be used (<code>$statusValues</code> is the sequence of status values from the lower
level result items):</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XQUERY">declare function local:status($statusValues as xs:string*) as xs:string
{
    if ($statusValues ='FAILED') then 'FAILED'
    else if ($statusValues ='SKIPPED') then 'SKIPPED'
    else if ($statusValues ='WARNING') then 'WARNING'
    else if ($statusValues ='INFO') then 'INFO'
    else if ($statusValues ='PASSED_MANUAL') then 'PASSED_MANUAL'
    else if ($statusValues ='PASSED') then 'PASSED'
    else if ($statusValues ='NOT_APPLICABLE') then 'NOT_APPLICABLE'
    else 'UNDEFINED'
};</code></pre>
</div>
</div>
</li>
<li>
<p>A time stamp when the execution of the test item was started in child
element <code>etf:startTimestamp</code>. The value is expected to include seconds
and be in the UTC timezone.</p>
</li>
<li>
<p>The duration of the execution in milliseconds (an integer) in child
element <code>etf:duration</code>.</p>
</li>
<li>
<p>A reference to the corresponding test item for which this is a result
is included in attribute <code>ref</code> in child element <code>etf:resultedFrom</code>.
Again, <code>ref</code> is the id of that test item. An <code>etf:TestAssertionResult</code>
will always reference an <code>etf: TestAssertion</code>, and so on. The test items
and their XML representation are discussed below.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>etf:TestTaskResult</code> may have additional child elements (more
information is provided in separate pages documenting more advanced
features), but it must have a child element <code>etf:testObject</code> that
references the <code>etf:TestObject</code> that represents the XML documents under
test. As this identifier is assigned by ETF, it is passed to the XQuery
as an external variable <code>$testObjectId</code>.</p>
</div>
<div class="paragraph">
<p>Test assertions may include messages. This is at least the case for
failed assertions or assertions with warnings or other information.
These are provided embedded in a child element <code>etf:messages</code> where each
message has the following structure (to support translation of messages
into different languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>ref</code> attribute that includes the name of a message template. All
template names start with "TR.". Message templates and their XML
representation are discussed below. They are basically a set of text
strings (one for each supported language) which include placeholders.</p>
</li>
<li>
<p>For each of the placeholders an <code>etf:argument</code> element is provided
inside of an <code>etf:translationArgument</code> element. The <code>token</code> attribute is
the name of the placeholder and the text node is the value the
placeholder should be replace with in the message.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="typical-setup">3.4. Typical setup</h3>
<div class="paragraph">
<p>The BaseX test driver in ETF expects that each Executable Test Suite is
specified using an XML document described in the next section. The
document includes a file reference to the XQuery to be executed. The
BaseX test driver of ETF will execute this XQuery and pass the file
reference to the Executable Test Suite document in an external variable
<code>$etsFile</code>.</p>
</div>
<div class="paragraph">
<p>The XQuery will process the Executable Test Suite document and execute
each test assertion and return the XML document with the root element
<code>etf:TestTaskResult</code> as described above.</p>
</div>
<div class="paragraph">
<p>The details are discussed in the following sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="xml-document-of-an-executable-test-suite">3.5. XML document of an Executable Test Suite</h3>
<div class="paragraph">
<p>A document specifying an Executable Test Suite is an XML document with
the root element <code>etf:ExecutableTestSuite</code>. The content model is
specified using an
<a href="https://github.com/interactive-instruments/etf-bsxds/blob/master/src/main/resources/schema/model/test.xsd">XML
schema</a>.</p>
</div>
<div class="paragraph">
<p>In order to enable that ETF can identify all Executable Test Suite
documents (and monitor them for changes) without analysing the file
content, the file names have to use a suffix "-bsxets.xml".</p>
</div>
<div class="paragraph">
<p>Here is a simple example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. A simple BaseX-based Executable Test Suite</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;ExecutableTestSuite xmlns="http://www.interactive-instruments.de/etf/2.0"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 http://services.interactive-instruments.de/etf/schema/model/resultSet.xsd" id="EID545f9e49-009b-4114-9333-7ca26413b5d4"&gt;
    &lt;itemHash&gt;bQ==&lt;/itemHash&gt;
    &lt;remoteResource&gt;http://github.com/inspire-eu-validation/ets-repository/data-encoding/inspire-gml&lt;/remoteResource&gt;
    &lt;localPath&gt;/auto&lt;/localPath&gt;
    &lt;label&gt;Conformance class: INSPIRE GML encoding&lt;/label&gt;
    &lt;description&gt;&lt;![CDATA[This test suite examines GML documents against basic requirements for the GML encoding for spatial data sets in INSPIRE. This only covers application-schema-independent, generic requirements. Requirements related to specific application schemas are part of conformance classes with a dependency on this conformance class.&lt;br/&gt;&lt;br/&gt;
&lt;b&gt;This is a draft version. It has limitations and is expected to contain errors.&lt;/b&gt; Please report any issues or problems &lt;a href="https://github.com/interactive-instruments/ets-repository/issues" target="_blank"&gt;in GitHub&lt;/a&gt;.&lt;br/&gt;&lt;br/&gt;
Known limitations are documented in the description of the applicable test case or test assertion.&lt;br/&gt;&lt;br/&gt;
Source: &lt;a href="http://inspire.ec.europa.eu/id/ats/data-encoding/3.3/inspire-gml" target="_blank"&gt;Conformance Class 'INSPIRE GML encoding'&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;
Pre-requisite conformance classes:
&lt;ul&gt;&lt;li&gt;Conformance Class 'GML 3.2 documents [OGC]'&lt;/li&gt;&lt;/ul&gt;]]&gt;&lt;/description&gt;
    &lt;reference&gt;../../inspire-bsxets.xq&lt;/reference&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;author&gt;interactive instruments GmbH&lt;/author&gt;
    &lt;creationDate&gt;2016-08-15T00:00:00Z&lt;/creationDate&gt;
    &lt;lastEditor&gt;interactive instruments GmbH&lt;/lastEditor&gt;
    &lt;lastUpdateDate&gt;2016-08-15T00:00:00Z&lt;/lastUpdateDate&gt;
    &lt;testDriver ref="EID4dddc9e2-1b21-40b7-af70-6a2d156ad130"/&gt;
    &lt;translationTemplateBundle ref="EID70a263c0-0ad7-42f2-9d4d-0d8a4ca71b52"/&gt;
    &lt;supportedTestObjectTypes&gt;
        &lt;testObjectType ref="EIDe1d4a306-7a78-4a3b-ae2d-cf5f0810853e"/&gt;
    &lt;/supportedTestObjectTypes&gt;
    &lt;testModules&gt;
        &lt;TestModule id="EID8e96257c-ae42-4123-b298-b8c5eda3a027"&gt;
            &lt;label&gt;IGNORE&lt;/label&gt;
            &lt;description&gt;IGNORE&lt;/description&gt;
            &lt;parent ref="EID545f9e49-009b-4114-9333-7ca26413b5d4"/&gt;
            &lt;testCases&gt;
                &lt;TestCase id="EIDf66872d4-3a1f-4581-a501-94200219bf13"&gt;
                    &lt;label&gt;Basic tests&lt;/label&gt;
                    &lt;description&gt;Verify that all documents contain GML features and use the expected character encoding.&lt;/description&gt;
                    &lt;parent ref="EID8e96257c-ae42-4123-b298-b8c5eda3a027"/&gt;
                    &lt;testSteps&gt;
                        &lt;TestStep id="EIDc177cf64-3a66-4ac4-92b9-61207aab8007"&gt;
                            &lt;label&gt;IGNORE&lt;/label&gt;
                            &lt;description&gt;IGNORE&lt;/description&gt;
                            &lt;parent ref="EIDf66872d4-3a1f-4581-a501-94200219bf13"/&gt;
                            &lt;statementForExecution&gt;not applicable&lt;/statementForExecution&gt;
                            &lt;testItemType ref="EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0"/&gt;
                            &lt;testAssertions&gt;
                                &lt;TestAssertion id="EIDcab35f1a-6292-44b9-ae2c-9ec62fc0f4b6"&gt;
                                    &lt;label&gt;gml.a.1: Errors loading the XML documents&lt;/label&gt;
                                    &lt;description&gt;&lt;![CDATA[Report errors that occurred during loading the documents in the test object. A typical example is an XML document that is not well-formed and therefore cannot be processed.]]&gt;&lt;/description&gt;
                                    &lt;parent ref="EIDc177cf64-3a66-4ac4-92b9-61207aab8007"/&gt;
                                    &lt;expectedResult&gt;NOT_APPLICABLE&lt;/expectedResult&gt;
                                    &lt;expression&gt;if (not($validationErrors)) then 'PASSED' else ('FAILED', for $error in $validationErrors return (local:addMessage('TR.valdiationError', map { 'text': $error })))&lt;/expression&gt;
                                    &lt;testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/&gt;
                                    &lt;translationTemplates&gt;
                                        &lt;translationTemplate ref="TR.valdiationError"/&gt;
                                    &lt;/translationTemplates&gt;
                                &lt;/TestAssertion&gt;
                                &lt;TestAssertion id="EID928d8204-3015-4811-82fd-f4779b35385b"&gt;
                                    &lt;label&gt;gml.a.2: Document root element&lt;/label&gt;
                                    &lt;description&gt;&lt;![CDATA[Check for each XML document that the root element is a GML feature or a GML feature collection.&lt;br/&gt;&lt;br/&gt;
For feature collections the following root elements are recognised:
&lt;ul&gt;
&lt;li&gt;wfs:FeatureCollection (WFS 2.0),&lt;/li&gt;
&lt;li&gt;gml:FeatureCollection (GML 3.2),&lt;/li&gt;
&lt;li&gt;base:SpatialDataSet (INSPIRE Base 3.2 or 3.3).&lt;/li&gt;
&lt;/ul&gt;
This test is a pre-condition to identify the INSPIRE features in the test object.&lt;br/&gt;&lt;br/&gt;
Relevant requirements and recommendations:
&lt;ul&gt;&lt;li&gt;Recommendation 11 - For the exchange of spatial objects in GML, an XML document with a FeatureCollection root element from ISO 19142:2010 (WFS 2.0) should be used.&lt;/li&gt;&lt;/ul&gt;
&lt;b&gt;Known limitations:&lt;/b&gt;
&lt;ul&gt;
&lt;li&gt;Currently only feature collections are recognized as the test engine BaseX is not schema-aware. A new extension function is required to identify all feature elements.&lt;/li&gt;
&lt;/ul&gt;
Source: &lt;a href="" target="_blank"&gt;Abstract Test Case 'Basic test'&lt;/a&gt;]]&gt;&lt;/description&gt;
                                    &lt;parent ref="EIDc177cf64-3a66-4ac4-92b9-61207aab8007"/&gt;
                                    &lt;expectedResult&gt;NOT_APPLICABLE&lt;/expectedResult&gt;
                                    &lt;expression&gt;
let $filesWithErrors := $db[not(wfs:FeatureCollection or gml:FeatureCollection or base32:SpatialDataSet or base:SpatialDataSet or gml:AbstractFeature)][position() le $limitErrors]
return
(if ($filesWithErrors) then 'FAILED' else 'PASSED',
 local:error-statistics('TR.filesWithErrors', count($filesWithErrors)),
 for $file in $filesWithErrors
    order by local:filename($file)
    let $root := $file/element()
    return
    local:addMessage('TR.incorrectRoot', map { 'filename': local:filename($root), 'elementName': local-name($root), 'namespace': namespace-uri($root) }))
                                    &lt;/expression&gt;
                                    &lt;testItemType ref="EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a"/&gt;
                                    &lt;translationTemplates&gt;
                                        &lt;translationTemplate ref="TR.incorrectRoot"/&gt;
                                        &lt;translationTemplate ref="TR.filesWithErrors"/&gt;
                                    &lt;/translationTemplates&gt;
                                &lt;/TestAssertion&gt;
                            &lt;/testAssertions&gt;
                        &lt;/TestStep&gt;
                    &lt;/testSteps&gt;
                &lt;/TestCase&gt;
            &lt;/testCases&gt;
        &lt;/TestModule&gt;
    &lt;/testModules&gt;
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s go through the document in the example in detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All items that are stored by ETF and may be referenced include an
attribute <code>id</code> where the value must be a UUID with a prefix "EID". There
are many ways to generate a pool of UUIDs when drafting an Executable
Test Suite, including web sites like <a href="https://www.uuidgenerator.net/" class="bare">https://www.uuidgenerator.net/</a>.<br></p>
</li>
<li>
<p>All items include the properties <code>etf:label</code> and <code>etf:description</code>. It
is essential to provide these elements in order to generate test reports
that are useful and understandable. The description may include HTML
markup that will be used when generating test reports in HTML; the
markup must encoded or embedded in a CDATA section.</p>
</li>
<li>
<p>All items, except the top level test suite, has a <code>etf:parent</code> child
element with a <code>ref</code> attribute. The value of the <code>ref</code> attribute is the
<code>id</code> of the ancestor item. Like in the case of the test result in the
section "Introduction", the <code>ref</code> value is redundant as it could be
derived from the nested document structure, but it is required so that
the items can also be handled separately within ETF without losing the
relationships between the items.</p>
</li>
<li>
<p>The elements <code>etf:itemHash</code> and <code>etf:localPath</code> are used by ETF
internally. Use "bQ==" and "/auto" as initial values respectively.</p>
</li>
<li>
<p>The element <code>etf:remoteResource</code> may be included to provide a link to
a webpage where additional information about the test suite can be
found.</p>
</li>
<li>
<p>The element <code>etf:reference</code> is a local file reference to
<a href="#the-xquery-document">the XQuery</a> to be executed by the ETF test
driver for BaseX.</p>
</li>
<li>
<p>The elements <code>etf:version</code>, <code>etf:author</code>, <code>etf:creationDate</code>,
<code>etf:lastEditor</code> and <code>etf:lastUpdateDate</code> are used to provide metadata
about this version of the Executable Test Suite. The 'date' values are
expected to include time and be in the UTC timezone.</p>
</li>
<li>
<p>The element <code>etf:testDriver</code> references the test driver for BaseX. The
current test driver has a fixed identifier
"EID4dddc9e2-1b21-40b7-af70-6a2d156ad130".</p>
</li>
<li>
<p>The element <code>etf:translationTemplateBundle</code> references an
<code>etf:TranslationTemplateBundle</code> object containing all linguistic text in
one or more languages used in an Executable Test Suite. The structure of
the document is described below. Multiple Executable Test Suites may
share a single bundle. A bundle is typically managed as a separate XML
document located the sub directory <code>include-metadata</code>.</p>
</li>
<li>
<p>The element <code>etf:supportedTestObjectTypes</code> includes references to the
<code>etf:TestObjectType`s that this Executable Test Suite supports, i.e. the
Executable Test Suite can be executed on test objects that are of one
the referenced types. For each supported `etf:TestObjectType</code> an element
<code>etf:testObjectType</code> is created.</p>
</li>
<li>
<p>Test modules, test cases, test steps and test assertions are described
in the document where the nesting represents the structure of the test
items. The example above has a single test module with a single test
case with a single test step and two test assertions.</p>
</li>
<li>
<p>For BaseX tests the concept of test steps is usually not applicable
and there will be exactly one test step for each test case. If label and
description of the test step are set to the values "IGNORE" the
superfluous test step will not be shown in test reports.</p>
</li>
<li>
<p>Often the additional structure level of test modules is not needed or
used, i.e. there will be exactly one test module in the test suite.
Again, if label and description of the test module are set to the values
"IGNORE" the superfluous test module will not be shown in test reports.</p>
</li>
<li>
<p>The elements <code>etf:statementForExecution</code> and <code>etf:testItemType</code> in
test steps are not relevant for tests using BaseX, but must be provided.
<code>etf:statementForExecution</code> must be a value that is not empty; a typical
approach is to use "not applicable" as the value. For
<code>etf:testItemType</code>, reference "EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0",
which is a pre-defined <code>etf:TestItemType</code> for superfluous test steps in
BaseX.</p>
</li>
<li>
<p>For test assertions the elements discussed in the next bullet items
need to be provided.</p>
</li>
<li>
<p>The element <code>etf:expectedResult</code> is not relevant for tests using
BaseX, but must be provided. Use "NOT_APPLICABLE" as the value.</p>
</li>
<li>
<p>The element <code>etf:testItemType</code> identifies the type of the test
assertion. Three values are pre-defined for BaseX tests:</p>
</li>
<li>
<p>"EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a" for assertions where the
element <code>etf:expression</code> contains an XQuery fragment that has to be
executed to determine the result.</p>
</li>
<li>
<p>"EIDb48eeaa3-6a74-414a-879c-1dc708017e11" for assertions where the
element <code>etf:expression</code> can be ignored and the result status will
always be 'PASSED_MANUAL' indicating that the assertion needs to be
checked manually by an expert.</p>
</li>
<li>
<p>"EID92f22a19-2ec2-43f0-8971-c2da3eaafcd2" for assertions that are
disabled, e.g. during the drafting phase or due to known issues that
have to be fixed.</p>
</li>
<li>
<p>In case of an assertion of type
"EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a", the element <code>etf:expression</code>
contains an XQuery fragment that will be executed to determine the
result and any messages for the user. The rules for these expressions
are discussed in the next section about the XQuery document.</p>
</li>
<li>
<p>The element <code>etf:translationTemplates</code> lists all message templates
that may be created by the test assertion as part of the execution of
the XQuery fragment.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="the-xquery-document">3.6. The XQuery document</h3>
<div class="paragraph">
<p>As explained in the sections above, the XQuery has to process the
<code>etf:ExecutableTestSuite</code> document, execute queries based on the
expressions for each XQuery assertion and return a <code>etf:TestTaskResult</code>
document capturing the result of the test execution.</p>
</div>
<div class="paragraph">
<p>The ETF test driver for BaseX passes the following external variables to
the XQuery, which must be declared in the XQuery and which are necessary
to enable the execution of the test suite:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$testObjectId</code> is the id of the test object on which the test suite
is to be executed. This information is required to construct the
<code>etf:TestTaskResult</code> document.</p>
</li>
<li>
<p><code>$testTaskResultId</code> is the id of the result, i.e. the
<code>etf:TestTaskResult</code> element.</p>
</li>
<li>
<p><code>etf:$projDir</code> is the local path to the project directory that is
monitored by ETF and which contains all necessary files including the
<code>etf:ExecutableTestSuite</code> document, the XQuery document, the
<code>etf:TranslationTemplateBundle</code> document, etc.</p>
</li>
<li>
<p><code>etf:$tmpDir</code> is the local path to a directory where additional files
may be written during execution. This is discussed in the section on
attachements below.</p>
</li>
<li>
<p>ETF loads all XML documents under test into one or more BaseX
databases. Typically it will be one database, but for very large sets of
XML documents the documents will distributed into several databases due
to limitations in the number of XML nodes per database. In this case,
the name of the databases will follow the pattern
<code>concat($dbBaseName,'-',$i)</code> where <code>$i</code> is an integer between <code>0</code> and
<code>$dbCount-1</code>.</p>
</li>
<li>
<p><code>$etsFile</code> is the local path to the XML document of the Executable
Test Suite to be executed.</p>
</li>
<li>
<p><code>$validationErrors</code> is a string with any errors that occured during
loading the XML documents under test into BaseX. Only documents with
file extensions "xml" and "gml" are processed. Files that are not
well-formed XML documents are excluded. If schema validation against a
pre-defined schema is activated, only valid schemas are loaded. Any
errors detected in the files by the XML parser are reported in this
variable. This information may be used in a test assertion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>How the XQuery processes the <code>etf:ExecutableTestSuite</code> document,
executes queries for each XQuery assertion and generates the
<code>etf:TestTaskResult</code> document is up to the developer of the Executable
Test Suite, but the standard approach is the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The values of the variables are checked. In case of an error an
exception is raised.</p>
</li>
<li>
<p>The database(s) are opened.</p>
</li>
<li>
<p>The items to inspect, e.g. the elements representing GML features, are
identified.</p>
</li>
<li>
<p>The Executable Test Suite document <code>$etsFile</code> is loaded.</p>
</li>
<li>
<p>A single XQuery that will execute the complete test suite using the
eval() function of XQuery is compiled. This approach is necessary as the
XQuery fragments in the <code>etf:expression</code> elements in the test assertions
need to be executed. This single XQuery consists of a fixed prolog
consisting of</p>
</li>
<li>
<p>namespace / module / variable declarations and functions used in
<code>etf:expression</code> elements (this typically is read from a separate file),</p>
</li>
<li>
<p>additional preparatory statements and</p>
</li>
<li>
<p>the <code>etf:TestTaskResult</code> XML structure based on the test modules, test
cases, test step and test assertions in the Executable Test Suite
document.</p>
</li>
<li>
<p>Try/catch blocks are used frequently to contain error situations as
good as possible, including errors in the XQuery fragments in
<code>etf:expression</code> elements.</p>
</li>
<li>
<p>This XQuery is executed using eval() and the result is returned to the
ETF test driver.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A generic template for reuse is available in the
<a href="https://github.com/interactive-instruments/etf-ets-repository/tree/master/generic">directory
'generic'</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This generic template is designed for testing features
(however, the basic structure is the same, if metadata records or other
XML elements are subject to the tests). The generic template consists of</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/ets-generic-bsxets.xq">generic
XQuery</a>,</p>
</li>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/generic-query-prolog.xq">generic
XQuery prolog</a> for the dynamic XQuery that is compiled by
ets-generic-bsxets.xq,</p>
</li>
<li>
<p>additional preparatory statements that add a statistics table with the
number of features per feature type is adds features with geometries to
a spatial index to support spatial queries in assertions using the
<a href="https://github.com/interactive-instruments/etf-gmlgeox">GmlGeoX module</a>),</p>
</li>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/include-metadata/generic-ettb.xml">starting
point for a translation template bundle</a> and</p>
</li>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/include-metadata/generic-esrtt.xml">statistical
table template</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this generic XQuery, the following variables are passed to the
dynamic XQuery, i.e. these variables are available in the
<code>etf:expression</code> fragments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$db</code>: the sequence of XML document nodes of the XML documents under
test</p>
</li>
<li>
<p><code>$features</code>: the sequence of GML feature elements in the XML documents
under test</p>
</li>
<li>
<p><code>$idMap</code>: a map of the gml:id values of the features</p>
</li>
<li>
<p><code>$testObjectId</code>: the id of the test object in ETF</p>
</li>
<li>
<p><code>$logFile</code>: the name of the log file in the tmp directory</p>
</li>
<li>
<p><code>$statFile</code>: the name of the file with the statistical table in the
tmp directory</p>
</li>
<li>
<p><code>$limitErrors</code>: to avoid memory and runtime issues in cases with
millions of errors it is recommended to limit the number of errors that
is processed for each assertion; by default '1000' is used</p>
</li>
<li>
<p><code>$validationErrors</code>: the list of errors that occured when loading the
XML documents under test into the BaseX databases</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Currently the XQuery fragment in an <code>etf:expression</code> in each assertion
has to return a sequence of items, where the first item is a string with
the status, e.g. 'PASSED' or 'FAILED'. Any additional items must be
<code>etf:message</code> elements.</p>
</div>
<div class="exampleblock">
<div class="title">Example 7. XQueries used in the INSPIRE validator</div>
<div class="content">
<div class="paragraph">
<p>In the INSPIRE case, there are three different XQuery options that are
used. In Exectuable Test Suites that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203; test features (elements
substitutable for gml:AbstractFeature) and which include tests calling
functions of the GmlGeoX library,
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/inspire-bsxets.xq">inspire-bsxets.xq</a> is used;</p>
</li>
<li>
<p>&#8230;&#8203; test features (elements substitutable for gml:AbstractFeature),
but without using the GmlGeoX library,
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/inspire-noggeo-bsxets.xq">inspire-noggeo-bsxets.xq</a> is used;</p>
</li>
<li>
<p>&#8230;&#8203; test metadata records (gmd:MD_Metadata),
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/inspire-md-bsxets.xq">inspire-md-bsxets.xq</a> is used.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The current mechanism will in the future be replaced by a new BaseX
module implementing a listener similar to the following XQuery functions
currently defined in generic-query-prolog.xq:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>start($id as xs:string) as empty-sequence()</code></p>
</li>
<li>
<p><code>end($id as xs:string, $status as xs:string) as empty-sequence()</code></p>
</li>
<li>
<p>`addMessage($templateId as xs:string, $map as map(*)) as element()</p>
</li>
<li>
<p><code>log($text as xs:string) as empty-sequence()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the listener is implemented, the whole generation of the
<code>etf:TestTaskResult</code> document will be done by the ETF test driver.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spatial-tests">3.7. Testing spatial aspects</h3>
<div class="paragraph">
<p><mark>Add more information how to use the GmlGeoX functions. Sources: <a href="https://github.com/interactive-instruments/etf-gmlgeox/blob/master/Readme.md" class="bare">https://github.com/interactive-instruments/etf-gmlgeox/blob/master/Readme.md</a> and <a href="https://github.com/interactive-instruments/etf-webapp/wiki/dev_manual_modules_gmlgeox" class="bare">https://github.com/interactive-instruments/etf-webapp/wiki/dev_manual_modules_gmlgeox</a></mark></p>
</div>
</div>
<div class="sect2">
<h3 id="parameters">3.8. Parameters</h3>
<div class="paragraph">
<p>Parameters for each Exectuable Test Suite may be declared as part of the
<code>etf:ExecutableTestSuite</code> document. The ETF web application will include
these parameters in the dialog when a test run is started.</p>
</div>
<div class="paragraph">
<p>The typical parameters for tests on sets of XML documents are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>files_to_test</code>: A regular expression. All files in the test object
where the file name matches the regular expression will be check in the
test, all other will be excluded. The default value '.*' matches all
files.</p>
</li>
<li>
<p><code>tests_to_execute</code>: A regular expression. All test assertions in the
executable test suite where the label matches the regular expression
will be used in the test run, all other will be skipped. The default
value '.*' matches all test assertions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is the XML snippet for these parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">    &lt;ParameterList name="ETF Standard Parameters for XML test objects"&gt;
        &lt;parameter name="files_to_test" required="true"&gt;
            &lt;defaultValue&gt;.*&lt;/defaultValue&gt;
            &lt;description ref="TR.filesToTest"/&gt;
            &lt;allowedValues&gt;.*&lt;/allowedValues&gt;
            &lt;type&gt;string&lt;/type&gt;
        &lt;/parameter&gt;
        &lt;parameter name="tests_to_execute" required="false"&gt;
            &lt;defaultValue&gt;.*&lt;/defaultValue&gt;
            &lt;description ref="TR.testsToExecute"/&gt;
            &lt;allowedValues&gt;.*&lt;/allowedValues&gt;
            &lt;type&gt;string&lt;/type&gt;
        &lt;/parameter&gt;
    &lt;/ParameterList&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_test_object_types">3.9. Test Object Types</h3>
<div class="paragraph">
<p>Currently only one Test Object Type is supported and statically
predefined by the Test Driver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;etf:TestObjectType xmlns="http://www.interactive-instruments.de/etf/2.0"
    xmlns:etf="http://www.interactive-instruments.de/etf/2.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.interactive-instruments.de/etf/2.0 http://services.interactive-instruments.de/etf/schema/model/resultSet.xsd"
    id="EIDe1d4a306-7a78-4a3b-ae2d-cf5f0810853e"&gt;
    &lt;label&gt;INSPIRE data set in GML&lt;/label&gt;
    &lt;description&gt;A set of XML documents. Each document is either a WFS 2.0 FeatureCollection, a GML
        3.2 Feature Collection or an INSPIRE Base 3.2 or 3.3 SpatialDataSet. All features are GML
        3.2 Features.&lt;/description&gt;
&lt;/etf:TestObjectType&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In future versions of ETF it is planned that new Test Object Types may
be specified by a test developer defined and declared in XML in the
<code>include-metadata</code> directory.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<mark>Is this correct? There are also metadata records, for example. But if the test object type is pre-defined, it needs to be changed as this is INSPIRE specific and others may want to test, for example, different types of feature collections.</mark>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_dependencies">3.10. Dependencies</h3>
<div class="paragraph">
<p>Executable Test Suites may depend on other Executable Test Suites. This
dependency has two effects. Assume we have three test suites where test
suite A depends on test suite B which in turn depends on test suite C.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a user starts a test run for suite A on a set of XML documents, the
test run will first test the XML documents against test suite C, then
against test suite B and finally test suite A.</p>
</li>
<li>
<p>If a test suite fails then all dependent test suites will be skipped.
For example, if test suite B fails, test suite A will be skipped. <mark>This is not really the case for test suites, correct?</mark></p>
</li>
<li>
<p>The user will be prompted to set parameters for test suite A, which
will also be passed to test suite B and C. If test suite B or C declare
different parameters than test suite A, the default values for these
parameters will be used. Undefined parameters will be ignored.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, within a test suite, dependencies may also be declared
between test cases from the same test suite. Again, dependent test cases will be skipped, if a
test case fails. With test cases dependencies, it is the responsibility
of the developers to ensure that test cases are executed in a sequence
that is consistent with the dependencies.</p>
</div>
<div class="paragraph">
<p>Here are examples how dependencies are declared in XML in an
<code>etf:ExecutableTestSuite</code> document.</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. A dependency to another test suite</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;ExecutableTestSuite ...&gt;
  ...
  &lt;dependencies&gt;
    &lt;executableTestSuite ref="EID545f9e49-009b-4114-9333-7ca26413b5d4"/&gt;
  &lt;/dependencies&gt;
  ...
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 9. A dependency to another test case</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;ExecutableTestSuite ...&gt;
  ...
  &lt;TestCase ...&gt;
    ...
    &lt;dependencies&gt;
      &lt;testCase ref="EID2ee0045f-cf8d-4979-9d7d-76cb465a0314"/&gt;
    &lt;/dependencies&gt;
    ...
  &lt;TestCase ...&gt;
  ...
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 10. An INSPIRE test suite with dependencies</div>
<div class="content">
<div class="paragraph">
<p>The <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/metadata/iso/ets-md-iso-bsxets.xml">Executable Test Suite for the Conformance Class "INSPIRE Profile based on EN ISO 19115 and EN ISO 19119" in INSPIRE</a> includes both kinds of dependencies.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tags">3.11. Tags</h3>
<div class="paragraph">
<p>To associate an Executable Test Suite with a <a href="#tags">tag</a>, the tag is referenced from the XML document of the test suite.</p>
</div>
<div class="exampleblock">
<div class="title">Example 11. Associate a test suite with a tag</div>
<div class="content">
<div class="paragraph">
<p>The tag element in the following snippet associates the tag with <code>id</code> <code>EID7f57420f-b228-41ae-9467-86e7ffef6e7e</code> with the test suite:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;ExecutableTestSuite ...&gt;
  ...
  &lt;tags&gt;
      &lt;tag ref="EID7f57420f-b228-41ae-9467-86e7ffef6e7e"/&gt;
  &lt;/tags&gt;
  ...
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The tag is declared <a href="#tags">in XML in a separate document</a>, in the
<code>include-metadata</code> directory.</p>
</div>
<div class="exampleblock">
<div class="title">Example 12. An INSPIRE test suite with a tag</div>
<div class="content">
<div class="paragraph">
<p>The <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/metadata/iso/ets-md-iso-bsxets.xml">Executable Test Suite for the Conformance Class "INSPIRE Profile based on EN ISO 19115 and EN ISO 19119" in INSPIRE</a> is associated with a  <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/Tag-EID3b9846c7-3940-4795-ae1d-0b5d82375c76.xml">tag for test suites for metadata according to version 1.3 of the INSPIRE technical guidance for metadata</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_attachments">3.12. Attachments</h3>
<div class="paragraph">
<p>An Executable Test Suite may record additional information to a test
result as attachments. In the case of tests on XML documents, these are
typically the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A log file that includes the information that the XQuery logs using
the log() function. If the <code>type</code> attribute is set to "LogFile", the
information will be included in the HTML test report.</p>
</li>
<li>
<p>A file with statistical information of the content of the XML
documents. If the <code>type</code> attribute is set to "StatisticalReport", the
information will be included in the HTML test report.</p>
</li>
<li>
<p>A file with the dynamic XQuery, which may help with debugging in case
of any errors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Attachments are written to the temporary directory (variable <code>$tmpDir</code>)
and the links to them are included in the <code>etf:TestTaskResult</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 13. Example how attachments are referenced in a test result</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;attachments&gt;
  &lt;Attachment id="EID4c16160f-9004-467d-bf49-72b7da258eff" type="LogFile"&gt;
    &lt;label&gt;Log file&lt;/label&gt;
    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
    &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
    &lt;referencedData href="http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDfa95b457-0d69-458f-98f3-6eae9b7f388d/Attachments/EID4c16160f-9004-467d-bf49-72b7da258eff"/&gt;
  &lt;/Attachment&gt;
  &lt;Attachment id="EIDd9f69337-4ae0-4df2-a058-46b71e15135c" type="StatisticalReport"&gt;
    &lt;label&gt;Metadata record statistics&lt;/label&gt;
    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
    &lt;mimeType&gt;application/xml&lt;/mimeType&gt;
    &lt;referencedData href="http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDfa95b457-0d69-458f-98f3-6eae9b7f388d/Attachments/EIDd9f69337-4ae0-4df2-a058-46b71e15135c"/&gt;
  &lt;/Attachment&gt;
  &lt;Attachment id="EID0fed0d42-39a3-4692-8e38-e78e2f87507a" type="Query"&gt;
    &lt;label&gt;XQuery executed against the dataset&lt;/label&gt;
    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
    &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
    &lt;referencedData href="http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDfa95b457-0d69-458f-98f3-6eae9b7f388d/Attachments/EID0fed0d42-39a3-4692-8e38-e78e2f87507a"/&gt;
  &lt;/Attachment&gt;
&lt;/attachments&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_soapui_based_test_suites">4. SoapUI based Test Suites</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_required_knowledge_2">4.1. Required knowledge</h3>
<div class="paragraph">
<p>You should be familiar with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.soapui.org/getting-started/your-first-soapui-project.html">SoapUI</a></p>
</li>
<li>
<p><a href="http://groovy-lang.org/">Groovy</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_environment_2">4.2. Development environment</h3>
<div class="paragraph">
<p>A SoapUI Executable Test Suite is developed and tested using the
SoapUI GUI application.</p>
</div>
<div class="sect3">
<h4 id="_installation_2">4.2.1. Installation</h4>
<div class="paragraph">
<p>Prerequisites for the following steps to set up the ETS development environment are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Windows OS (it may work on Linux, too, but it is known to not work under macOS)</p>
</li>
<li>
<p>Java 1.8</p>
</li>
<li>
<p>SoapUI 5.3.0 installed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then follow these steps under Windows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download <a href="https://services.interactive-instruments.de/etfdev-af/etf-public-dev/de/interactive_instruments/etf/suim/SoapUI-ETF.zip">this ZIP file</a> (using "etf-public-dev" as username and password)</p>
</li>
<li>
<p>Extract the ZIP file in any directory</p>
</li>
<li>
<p>Run 'install-plugins.bat'</p>
</li>
<li>
<p>Run 'SoapUI 5.3.0.bat'</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To load the plugins, SoapUI must always be started with the 'SoapUI 5.3.0.bat' file from the extracted directory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This procedure is required as <a href="https://github.com/SmartBear/soapui/pull/201">Smartbear decided to lock out unsigned plugins</a>. Because the signing process is not transparent to us, we decided to use this workaround.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_executing_tests_2">4.2.2. Executing tests</h4>
<div class="paragraph">
<p><mark>This is not understandable at this point. I have only set up the environment, but there is no SoapUI project yet, where I could set serviceEndpoint, etc. It is also unclear on which "Test project" I should double click and where.</mark></p>
</div>
<div class="paragraph">
<p>To execute a test suite against a web service set the serviceEndpoint property
and the username and password (authUser and authPwd properties) if the service
requires authentication.</p>
</div>
<div class="paragraph">
<p>Double click on the Test project, click on the 'Test Suites' tab and start the
test run with a click on the green arrow.</p>
</div>
<div class="paragraph">
<p><mark>Screenshot?</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basics_2">4.3. Basics</h3>
<div class="paragraph">
<p><a href="http://www.soapui.org">SoapUI</a> is an open-source web service testing
application originally developed for testing service-oriented architectures
(SOA) and REST services. In ETF, it is extended via plugins and used to test
spatial web services.</p>
</div>
<div class="paragraph">
<p>Start the GUI with the batch file and click on 'File' and then on
'Create Empty project'. The name can be changed by right-clicking on the test
project and selecting 'Rename'.</p>
</div>
<div class="paragraph">
<p>SoapUI and ETF are using a slightly different terminology for test items, as the
following table shows.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>SoapUI</strong></th>
<th class="tableblock halign-left valign-top"><strong>ETF</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Project</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Executable Test Suite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Suite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Case</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Step</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Assertion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Assertion</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each project must possess properties which are used to provide metadata for ETF
and for passing user data into SoapUI, for example the service URL to test.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27132670-fb733832-510f-11e7-941d-f328250e7fd0.png" alt="27132670 fb733832 510f 11e7 941d f328250e7fd0"></span></p>
</div>
<div class="paragraph">
<p>Create a serviceEndpoint property in the "Custom Properties" tab and set a web service, for example an Atom service feed.</p>
</div>
<div class="paragraph">
<p>Properties on the Test project level can be referenced within SoapUI with the
expression <code>${#Project#PROPERTY}</code>.</p>
</div>
<div class="paragraph">
<p>To test whether a atom service feed is available, create new
SoapUI Test Suite, a Test Case and a HTTP Test Step. The Request URL ("Endpoint") of each
HTTP Test Step must be set to <code>${#Project#serviceEndpoint}</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27137321-eaecce0c-511d-11e7-8f0b-93361d0ba26b.png" alt="27137321 eaecce0c 511d 11e7 8f0b 93361d0ba26b"></span></p>
</div>
<div class="paragraph">
<p>Add a new Assertion with the plus sign, select 'Script' and 'Script Assertion'
and add the following content to check if the 'atom:feed' element exists in
the response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="Groovy">import de.interactive_instruments.etf.suim.*
Assert a = new Assert(messageExchange, context, log, Assert.INSPIRE_DS_NS)
a.exists("/atom:feed", "TR.missingFeedRootElement")</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you click on the green arrow to run the Assertion you will most likely get
this error:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27138183-306dad32-5120-11e7-81de-71c8408922d7.png" alt="27138183 306dad32 5120 11e7 81de 71c8408922d7"></span></p>
</div>
<div class="paragraph">
<p>The error is preprocessed for ETF and will, when SoapUI is run from within the
ETF, reference the 'TR.noDataReturned' translation and output the corresponding error message from the loaded Translation Template Collection (see the parameter etf.translation.template.collection.id below).</p>
</div>
<div class="exampleblock">
<div class="title">Example 14. Error message in the INSPIRE validator</div>
<div class="content">
<div class="paragraph">
<p>The error message in the INSPIRE validator would be (see the entry in the <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/TranslationTemplateBundle-EIDfadd4929-fa60-4781-b658-703bbfe3f4eb.xml#L13">Translation Template collection</a>):</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>'Expected a response but the service did not return any data. Verify that the used endpoint URL is correct and accessible from outside your organization. If the service requires authentication, then check that the correct credentials are used by the validator or verify that upstream firewalls/proxy servers do not prevent access.'</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="paragraph">
<p><mark>So every Translation Template Collection for SoapUI tests must at least have texts for all TR.xxx-messages that are defined in the predefined functions. The codes and their meaning needs to be listed in this manual along with the parameters of each message.</mark></p>
</div>
<div class="paragraph">
<p>This error occurs when no data has been received. Close the assertion (click on 'OK') and
click on the green arrow in the HTTP test step to execute the HTTP request and
execute the assertion against the response.</p>
</div>
<div class="paragraph">
<p>Depending on the received data, you may now get a passed assertion or get a error
with the 'TR.missingFeedRootElement' code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parameters_and_metadata_properties">4.4. Parameters and metadata properties</h3>
<div class="paragraph">
<p>Properties are used to parameterize an Executable Test Suite ('Test Project' in SoapUI terminology) as well as to associate it with other resources of ETF like Tags, Test Object Types etc. The standard properties are described in the following table.</p>
</div>
<div class="paragraph">
<p>Description of standard properties</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">serviceEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the service to test</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authUser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional username for authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authPwd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional password for authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authMethod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">only the value 'basic' for HTTP basic authentication is supported yet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.ignore.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If properties are added <mark>(where?)</mark>, that are not known to ETF,
they are expected to be parameters for the Test Suite and appear on Test start up <mark>(=start of a test run?)</mark>.
This can be avoided by using this property, which can contain a list of property names that should not be interpreted as parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.tag.ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EID reference to one or multiple <a href="#tags">Tags</a>, separated by commas <mark>(whitespace allowed?)</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.translation.template.collection.id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EID reference to a collection of <a href="#message-template-bundles">Translation Templates</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.supported.test.object.type.ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EID reference to one or more supported <a href="#test-object-types">Test Object Types</a>, separated by commas <mark>correct?</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.dependency.ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional EID reference to one ore multiple Executable Test
Suites this test suite depends on, separated by commas <mark>correct?</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.author</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the author of the test suite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.last.editor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the last editor of the test suite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.creation.date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date when the test suite was created as ISO 8601 string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.last.update.date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date when the test suite was updated as ISO 8601 string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the test suite</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="test-object-types">4.5. Test Object Types</h3>
<div class="paragraph">
<p>SoapUI Executable Test Suites support 3 Test Object Types which are predefined by
the test driver:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Web Service</p>
</li>
<li>
<p>Web Feature Service 2.0</p>
</li>
<li>
<p>Web Feed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>If these are pre-defined only, we need to add many more to allow others to develop their own ETS! At least WFS 1.0, WFS 1.1, WMS 1.1, WMS 1.3, WMTS 1.0, CSW 2.0, CSW 3.0, SOS 2.0, WCS 1.0, WCS 1.1, WCS 2.0, GeoServices REST API, but the list may grow quickly</mark></p>
</div>
<div class="paragraph">
<p><mark>Probably we also need to provide namespace lists like INSPIRE_DS_NS for other specs?</mark></p>
</div>
<div class="paragraph">
<p>The Test Object Types are used to check whether two or more test suites can
be executed on the same test object together in one Test Run.</p>
</div>
<div class="paragraph">
<p>The pre-defined Test Object Types are defined as follows: <mark>etfAppinfo is not used - delete?</mark></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML">&lt;testObjectTypes xmlns:etf="http://www.interactive-instruments.de/etf/2.0"&gt;
  &lt;etf:TestObjectType xmlns:etfAppinfo="http://www.interactive-instruments.de/etf/appinfo/1.0"
      id="EID88311f83-818c-46ed-8a9a-cec4f3707365"&gt;
      &lt;label&gt;Web Service&lt;/label&gt;
      &lt;description&gt;Any service with an interface using HTTP(S).&lt;/description&gt;
  &lt;/etf:TestObjectType&gt;
  &lt;etf:TestObjectType xmlns:etfAppinfo="http://www.interactive-instruments.de/etf/appinfo/1.0"
      id="EID9b6ef734-981e-4d60-aa81-d6730a1c6389"&gt;
      &lt;label&gt;Web Feature Service 2.0&lt;/label&gt;
      &lt;description&gt;A Web Service implementing OGC Web Feature Service 2.0 and OGC Filter Encoding 2.0&lt;/description&gt;
      &lt;parent xsi:type="loc" ref="EID88311f83-818c-46ed-8a9a-cec4f3707365"/&gt;
  &lt;/etf:TestObjectType&gt;
  &lt;etf:TestObjectType xmlns:etfAppinfo="http://www.interactive-instruments.de/etf/appinfo/1.0"
      id="EID49d881ae-b115-4b91-aabe-31d5791bce52"&gt;
      &lt;label&gt;Web Feed&lt;/label&gt;
      &lt;description&gt;A feed implementing the Atom Syndication Format that can be accessed using HTTP(S).&lt;/description&gt;
      &lt;parent xsi:type="loc" ref="EID88311f83-818c-46ed-8a9a-cec4f3707365"/&gt;
  &lt;/etf:TestObjectType&gt;
&lt;/testObjectTypes&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assertion_library">4.6. Assertion library</h3>
<div class="paragraph">
<p>The SoapUI extension library provides various functions for evaluating an XPath
expression against the received response. The functions are called on an
<a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/index.html?de/interactive_instruments/etf/suim/Assert.html">Assert</a>
object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="Groovy">import de.interactive_instruments.etf.suim.*
Assert a = new Assert(messageExchange, context, log, Assert.INSPIRE_DS_NS)</code></pre>
</div>
</div>
<div class="paragraph">
<p><mark>'messageExchange', 'context' and 'log' are pre-defined and have to be used as-is?</mark></p>
</div>
<div class="paragraph">
<p>For further information see the
<a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/index.html?de/interactive_instruments/etf/suim/Assert.html">Assert API documentation</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_tips_for_creating_helpful_test_suites">4.7. Tips for creating helpful test suites</h3>
<div class="paragraph">
<p><mark>We need to be more explicit how to create useful tests, what challenges are typically encountered and how these can be addressed.</mark></p>
</div>
<div class="paragraph">
<p><mark>Don&#8217;t we also need to document the rules/decisions somewhere, how certain situations are handled by the test driver? Technical test cases, etc.</mark></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_team_engine_based_test_suites">5. TEAM-Engine-based test suites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Support for the TEAM Engine is different then for the other test engines.</p>
</div>
<div class="paragraph">
<p>While it would be possible to develop new test suites in the TEAM Engine, this is not recommended as the TEAM Engine does not support many aspects of the ETF information model.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This <a href="http://opengeospatial.github.io/teamengine/testng-essentials.html">manual</a> has information for developing test suites for the Team Engine.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The TEAM Engine is primarily supported by ETF to allow that "native" Executable Test Suites for the test engines BaseX and SoapUI can declare dependencies to test suites developed for the TEAM Engine and so that ETF can execute these test suites using a remote TEAM Engine instance, typically the one hosted by OGC for their Compliance Program (CITE).</p>
</div>
<div class="paragraph">
<p>The test results reported by the TEAM Engine are transformed by ETF into the model of ETF for test results.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Some information that is typically included in ETF test results is not included in the TEAM Engine reports and, therefore, cannot be included in the ETF test reports.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><mark>Explain rules how the results are mapped.</mark></p>
</div>
<div class="sect2">
<h3 id="_team_engine_test_suites_supported_by_etf">5.1. TEAM Engine test suites supported by ETF</h3>
<div class="paragraph">
<p>Test suites for the TEAM Engine may be written in CTL or TestNG.</p>
</div>
<div class="paragraph">
<p>All recent and future test suites are planned to be developed using TestNG and accessible using a simple API. These test suites are supported by ETF as long as they do not require that any data is pre-loaded into the service under test.</p>
</div>
<div class="paragraph">
<p>CTL was used in the past for developing test suites that typically depend on a reference dataset. These tests are not useful in ETF as these test suites are only useful for testing the compliance of a product through a reference deployment, not for validating a specific service endpoint. Therefore, ETF does not support any CTL-based tests, which return test results in a completely different XML structure.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the future, it is planned to harmonize the XML format of all TEAM Engine test results using W3C EARL. Once that has been implemented - and ETF supports the EARL-based result format - also CTL-based test suites should be usable as long as they do not require any pre-loaded data and are accessible via the simple API.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_register_a_team_engine_test_suites_as_an_exectuable_test_suite_in_etf">5.2. How to register a TEAM Engine test suites as an Exectuable Test Suite in ETF</h3>
<div class="paragraph">
<p><mark>I did not find information about this. How to set dependecies, add tags, etc. I did not find the definition of EID95a1b6fc-2b55-3d43-9502-3b8b605bda10 either.</mark></p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-06-19 13:12:26 CEST
</div>
</div>
</body>
</html>